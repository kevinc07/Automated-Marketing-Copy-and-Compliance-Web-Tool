<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/intro.js/3.4.0/introjs.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/intro.js/3.4.0/intro.min.js"></script>
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/login.css') }}">
    <title>å°åŒ—å¯Œé‚¦éŠ€è¡Œ-è¡ŒéŠ·æ–‡æ¡ˆ</title>
</head>
<body>
    <div class="imtoolbar">
        <h1>
            <span class="greeting" style="margin-left: 40px;">
                {% if session['logged_in'] %}
                {{ session['username'] }}æ‚¨å¥½
                {% endif %}
            </span>
        </h1>
        <div class="logout-button-container">
            {% if session['logged_in'] %}
            <a id="logoutButton" style="display: flex; margin-left: 10px; align-items: center; justify-content: center; cursor: pointer;" title="ç™»å‡º">
                <img src="/static/img/logout.svg" class="impic">
            </a>
            {% endif %}
        </div>
        <div class="imsmalldiv">
            <button id="jump-page" class="btn-new-project">æ³•éµåŠ©æ‰‹</button>
            <button id="show-table" class="btn-new-project">æŸ¥çœ‹ç¸½è¡¨</button>
            <!-- æ–°å»ºå°ˆæ¡ˆæŒ‰éˆ• -->
            <button id="addProject" class="btn-new-project">+ æ–°å»ºå°ˆæ¡ˆ</button>
        </div>
    </div>

    
    <!-- Panes for Todo, In Progress, and Done -->
    <div class="panes-center">
        <div class="panes">
            <div class="pane" id="edit" ondrop="drop(event)" ondragover="allowDrop(event)" style="background-color: #fbe5e5; color: #e6555a;">
                <h3>ğŸ“ å¾…ç·¨è¼¯</h3>
                {% for task in edit_tasks %}
                <div id="task{{task[0]}}" class="task-card" draggable="true" ondragstart="drag(event)" onclick="handleTaskClick(this)" data-task-id="{{task[0]}}">
                    <span class="task-content">{{task[1]}}</span>
                    <div class="clickoptions">
                        <div class="more-options"></div>
                    </div>
                    <div class="dropdown-menu">
                        <a href="#" class="dropdown-item" data-task-id="{{task[0]}}" onclick="editTask(this, event)">ç·¨è¼¯</a>
                        <a href="#" class="dropdown-item" data-task-id="{{task[0]}}" onclick="deleteTask(this, event)">åˆªé™¤</a>
                    </div>
                </div>
                {% endfor %}
                <!-- List of tasks in Todo -->
            </div>
            <div class="pane" id="vetting" ondrop="drop(event)" ondragover="allowDrop(event)" style="background-color: #f6f2de; color: #f4c700;">
                <h3>â³ ä¸»ç®¡å¯©é–±ä¸­</h3>
                {% for task in vetting_tasks %}
                <div id="task{{task[0]}}" class="task-card" draggable="true" ondragstart="drag(event)" onclick="handleTaskClick(this)" data-task-id="{{task[0]}}">
                    <span class="task-content">{{task[1]}}</span>
                    <div class="clickoptions">
                        <div class="more-options"></div>
                    </div>
                    <div class="dropdown-menu">
                        <a href="#" class="dropdown-item" data-task-id="{{task[0]}}" onclick="editTask(this, event)">ç·¨è¼¯</a>
                        <a href="#" class="dropdown-item" data-task-id="{{task[0]}}" onclick="deleteTask(this, event)">åˆªé™¤</a>
                    </div>
                </div>
                {% endfor %}
                <!-- List of tasks in In Progress -->
            </div>
            <div class="pane" id="checklist" ondrop="drop(event)" ondragover="allowDrop(event)"  style="background-color: #e6f1f6; color: #6a9cb9;">
                <h3>ğŸ” æ³•éµå¯©æ ¸ä¸­</h3>
                {% for task in checklist_tasks %}
                <div id="task{{task[0]}}" class="task-card" draggable="true" ondragstart="drag(event)" onclick="handleTaskClick(this)" data-task-id="{{task[0]}}">
                    <span class="task-content">{{task[1]}}</span>
                    <div class="clickoptions">
                        <div class="more-options"></div>
                    </div>
                    <div class="dropdown-menu">
                        <a href="#" class="dropdown-item" data-task-id="{{task[0]}}" onclick="editTask(this, event)">ç·¨è¼¯</a>
                        <a href="#" class="dropdown-item" data-task-id="{{task[0]}}" onclick="deleteTask(this, event)">åˆªé™¤</a>
                    </div>
                </div>
                {% endfor %}
                <!-- List of tasks in Done -->
            </div>
            <div class="pane" id="posting" ondrop="drop(event)" ondragover="allowDrop(event)" style="background-color: #e5f3e5; color: #5EAA5F;">
                <h3>âœ… å·²å…¬å‘Š</h3>
                {% for task in posting_tasks %}
                <div id="task{{task[0]}}" class="task-card" draggable="true" ondragstart="drag(event)" onclick="handleTaskClick(this)" data-task-id="{{task[0]}}">
                    <span class="task-content">{{task[1]}}</span>
                    <div class="clickoptions">
                        <div class="more-options"></div>
                    </div>
                    <div class="dropdown-menu">
                        <a href="#" class="dropdown-item" data-task-id="{{task[0]}}" onclick="editTask(this, event)">ç·¨è¼¯</a>
                        <a href="#" class="dropdown-item" data-task-id="{{task[0]}}" onclick="deleteTask(this, event)">åˆªé™¤</a>
                    </div>
                </div>
                {% endfor %}
                <!-- List of tasks in Done -->
            </div>
        </div>
        <!-- Modal for editing taskname (only one needed) -->
        <div id="editTaskModal" class="modal" style="display: none;">
            <div class="modal-content">
                <span class="close-btn" onclick="closeModal()">&times;</span>
                <input type="text" id="newTaskName" placeholder="Enter new task name">
                <button onclick="submitEdit()">Submit</button>
            </div>
        </div>
    </div>

    <div class="tasks-table">
        <table>
            <thead>
                <tr>
                    <th>ä»»å‹™åç¨±</th>
                    <th>ç‹€æ…‹</th>
                    <th>ç·¨è¼¯æ™‚é–“</th>
                    <th>æˆªæ­¢æ—¥æœŸ</th>
                    <th>åŸ·è¡Œäºº</th>
                </tr>
            </thead>
            <tbody id="tasks-tbody">

            </tbody>
        </table>
    </div>


    {% if not is_logged_in %}
    <div class="login-panel" data-intro="è«‹å…ˆç™»å…¥/è¨»å†Š!" data-step="1">
        <!-- ç™»å…¥è¡¨å–® -->
        <div class="login-form">
            <p>ç™»å…¥è³‡è¨Š</p>
            <input id="username" type="text" placeholder="Username" value="{{ request.form['username'] }}">
            <input id="password" type="password" placeholder="Password">
            <div class="action-buttons">
                <button id="login" class="imbtn">Login</button>
                <a href="#" id="show-register" style="font-weight: bold; color: rgb(158, 155, 155); text-decoration: none;">è¨»å†Š</a>
            </div>
        </div>
    
        <!-- è¨»å†Šè¡¨å–® -->
        <div class="register-form" style="display: none;">
            <p>è¨»å†Šè³‡è¨Š</p>
            <input id="user-name" type="text" placeholder="Username">
            <input id="pass-word" type="password" placeholder="Password">
            <input id="confirm-password" type="password" placeholder="Confirm Password">
            <div class="action-buttons">
                <button id="register" class="imbtn">Register</button>
                <a href="#" id="show-login" style="font-weight: bold; color: rgb(158, 155, 155); text-decoration: none;">ç™»å…¥</a>
            </div>
        </div>
    </div>
    {% endif %}


    <script type="text/javascript" src="{{ url_for('static', filename='login_homepage.js') }}"></script>
</body>
</html>